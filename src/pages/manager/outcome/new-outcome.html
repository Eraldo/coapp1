<ion-header>

  <ion-navbar color="manager">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>
      New Outcome
    </ion-title>
    <ion-buttons end>
      <button ion-button icon-only [disabled]="!outcomeForm.valid" (click)="save(outcomeForm.value)">
        <ion-icon name="checkmark"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content>
  <form [formGroup]="outcomeForm" (ngSubmit)="save()">
    <ion-item>
      <ion-label floating>Name</ion-label>
      <ion-input type="text" formControlName="name"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Inbox</ion-label>
      <ion-toggle formControlName="inbox"></ion-toggle>
    </ion-item>
    <ion-item>
      <ion-label floating>Status</ion-label>
      <ion-select formControlName="status">
        <ion-option [value]="status" *ngFor="let status of statuses">{{status}}</ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label floating>Scope</ion-label>
      <ion-select formControlName="scope">
        <ion-option [value]="scope" *ngFor="let scope of scopes">{{scope}}</ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label floating>Deadline</ion-label>
      <ion-datetime formControlName="deadline"></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label floating>Start</ion-label>
      <ion-datetime formControlName="start"></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label floating>Content</ion-label>
      <ion-textarea formControlName="content"></ion-textarea>
    </ion-item>

    <!-- list of steps -->
    <div formArrayName="steps">
      <div *ngFor="let step of outcomeForm.controls.steps.controls; let i=index">
        <!-- Angular assigns array index as group name by default 0, 1, 2, ... -->
        <div [formGroupName]="i">
          <step [group]="outcomeForm.controls.steps.controls[i]" (removeEvent)="removeStep(i)"></step>
        </div>
      </div>
      <ion-item (click)="addStep()" [hidden]="!outcomeForm.controls.steps.valid">
        <ion-icon name="checkbox-outline" color="light" item-left></ion-icon>
        <ion-note>Add step</ion-note>
      </ion-item>
    </div>
    <!--<button ion-button type="submit" [disabled]="!outcomeForm.valid" (click)="save(outcomeForm.value)">Save</button>-->
  </form>
</ion-content>
